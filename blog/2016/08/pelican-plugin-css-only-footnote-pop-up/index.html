<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Footnotes are a classic staple in any writer’s toolbox and allows them to, in an unobtrusive way, citate sources or display additional information not directly related to the original argument. ...">
  <meta name="keywords" content="Markdown, Pelican, Python">
  <link rel="icon" href="https://steviepoppe.github.io/favicon.ico">

  <link rel="shortcut icon" type="image/png" href="https://steviepoppe.github.io/images/icons/favicon.png">
  <link rel="shortcut icon" type="image/x-icon" href="https://steviepoppe.github.io/favicon.ico">

  <title>Pelican Plugin: CSS-only footnote pop-up - Onoreto</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="https://steviepoppe.github.io/theme/js/footnotes.js"></script>

  <!-- Stylesheets -->
  <link href="https://steviepoppe.github.io/theme/css/all.min.css" rel="stylesheet">
  <!-- /Stylesheets -->

  <!-- RSS Feeds -->
  <link href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Onoreto Full Atom Feed" />
  <link href="http://localhost:8000/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto Full RSS Feed" />
  <link href="http://localhost:8000/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto RSS Feed" />
  <link href="http://localhost:8000/feeds/technical.atom.xml" type="application/atom+xml" rel="alternate" title="Onoreto Categories Atom Feed" />
  <link href="http://localhost:8000/feeds/technical.rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto Categories RSS Feed" />
  <!-- /RSS Feeds -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
          <![endif]-->

          <!-- Google Analytics -->
          <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-82857115-1', 'auto');
            ga('send', 'pageview');
          </script>
          <!-- /Google Analytics -->

<!-- https://developers.google.com/custom-search/docs/structured_data?hl=es&csw=1#microformats -->
<!--
<PageMap>
<DataObject type="document">
    <Attribute name="title">Pelican Plugin: CSS-only footnote pop-up</Attribute>
    <Attribute name="author">Stevie Poppe</Attribute>
    <Attribute name="description">Footnotes are a classic staple in any writer’s toolbox and allows them to, in an unobtrusive way, citate sources or display additional information not directly related to the original argument. Yet I feel online footnotes, through the way they’re often implemented imitating printed media footnotes, come over quite counterintuitive by forcing the interested reader to disrupt his reading flow, and by failing to make use of today’s extensive webdesign posibilities. As I royally use footnotes in my markdown writing workflow I figured I’d get acquainted with the Pelican documentation a bit and write a small unobtrusive CSS pop-up plugin to display these on hover for those devices that support it.</Attribute>
    <Attribute name="page_count">1</Attribute>
    <Attribute name="rating">5</Attribute>
    <Attribute name="last_update">2016-08-25T00:00:00+02:00</Attribute>
</DataObject>
<DataObject type="metatags">
    <Attribute name="category" value="Technical"/>
        <Attribute name="category" value="Pelican"/>
        <Attribute name="category" value="Markdown"/>
        <Attribute name="category" value="Python"/>
</DataObject>
-->

   

        </head>

        <body style="background-repeat: repeat; background-position: top left; background-attachment: scroll; background-image: url('https://steviepoppe.github.io/images/asanoha-400px.png');">
          <div id="wrapper">
            <!-- Header -->
            <div class="master">
              <div class="head-container">

                <div class="page-header">
                  <a href="https://steviepoppe.github.io" class="avatar-container pull-left">
                    <div class="avatar">
                      <div class="side"><img src="https://steviepoppe.github.io/images/logo2.png" class="img-responsive"/></div>
                    </div>
                  </a>
                  <h1 style="font-size: 28px; letter-spacing: 1px;"><a href="https://steviepoppe.github.io">Onoreto</a> <small>@Stevie Poppe</small></h1>
                </div>

                <nav class="navbar navbar-default">

                  <!-- Hamburger menu for mobile -->
<!--                   <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#plumage-navbar-collapse-1" aria-expanded="false">
                      <span class="sr-only">Toggle navigation</span>
                      <i class="fa fa-ellipsis-v fa-lg"></i>
                    </button>
                    <a class="navbar-brand" href="https://steviepoppe.github.io" title="@Stevie Poppe">Onoreto</a>
                  </div> -->

                  <!-- Menus and search forms -->
                  <div class="navbar-collapse" id="steviesmenubar">
                    <div style="float: left;">
                      <ul class="nav navbar-nav">
<li >
                          <a href="/">Blog</a>
                        </li>
<li >
                          <a href="/blog/category/">Categories</a>
                        </li>
<li >
                          <a href="https://steviepoppe.github.io/about/">About</a>
                        </li>
<li >
                          <a href="https://steviepoppe.github.io/resources/">Resources</a>
                        </li>
                      </ul>
                  </div>

                      <div class="social">
                        <ul class="socialnav social-icons-footer collapse">

                          <li>
                            <a href="https://twitter.com/PoppeStevie" title="Twitter">
                              <i class="icon-twitter" style="font-size: 10px !important;"></i>
                            </a><span class="screen-reader">Twitter</span>
                          </li>
                          <li>
                            <a href="https://be.linkedin.com/in/stevie-poppe-9048b395" title="Linkedin">
                              <i class="icon-linkedin" style="font-size: 10px !important;"></i>
                            </a><span class="screen-reader">Linkedin</span>
                          </li>
                          <li>
                            <a href="https://www.instagram.com/stevie.poppe/" title="Instagram">
                              <i class="icon-instagram" style="font-size: 10px !important;"></i>
                            </a><span class="screen-reader">Instagram</span>
                          </li>
                          <li>
                            <a href="https://www.goodreads.com/user/show/35676792-stevie-poppe" title="Goodreads">
                              <i class="icon-goodreads" style="font-size: 10px !important;"></i>
                            </a><span class="screen-reader">Goodreads</span>
                          </li>
                      </ul>
                      <ul class="socialnav social-icons-footer">
                                                <li>
                            <a href="https://steviepoppe.github.io/feeds/rss.xml" title="RSS">
                              <i class="icon-rss" style="font-size: 10px !important;">
                              </i>
                            </a>
                          </li>
                      </ul>
                  <form id="searchform" class="navbar-form navbar-right collapse" action="https://steviepoppe.github.io/search.html" > 
                    <input type="text" class="search-query form-control search-query" placeholder="Search" required name="q" id="tipue_search_input"></form>

                    </div>
                  

                  </div>

                </nav>

              </div>
            </div>
            <!-- /Header -->


            <!-- Content -->
            <div id="main">
    <div class="container content padding-40">
    <div class="container header-wrapper nobanner">
        <hr/>
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content center">
                      <h1 class="header-title">Pelican Plugin: CSS-only footnote pop-up</h1>
                      <p class="header-date">do 25 augustus 2016, in category <a href="https://steviepoppe.github.io/blog/category/technical/">Technical</a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="icon-tags" aria-hidden="true"></span>
<a href="https://steviepoppe.github.io/blog/tags/markdown/">Markdown</a>, <a href="https://steviepoppe.github.io/blog/tags/pelican/">Pelican</a>, <a href="https://steviepoppe.github.io/blog/tags/python/">Python</a>                      </p>
                  </div>
              </div>
        </div>
    </div>
    <div class="container-main">
        
<p>Footnotes are a classic staple in any writer’s toolbox and allows them to, in an unobtrusive way, citate sources or display additional information not directly related to the original argument. Yet I feel online footnotes, through the way they’re often implemented imitating printed media footnotes, come over quite counterintuitive by forcing the interested reader to disrupt his reading flow, and by failing to make use of today’s extensive webdesign posibilities.</p>
<p>As I royally use footnotes in my markdown writing workflow<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> I figured I’d get acquainted with the Pelican documentation a bit and write a small unobtrusive CSS pop-up plugin to display these on hover for those devices that support it.<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup></p>

<p>My solution is pretty rough and based on the way the markdown-python library parses markdown into HTML. As it’s a pretty rough workaround untested with other parsers, I have no intention to further maintain this code so feel free to use it however you’d like.</p>
<div class="codehilite"><pre><span></span>def content_object_init(instance):

    if instance._content is not None:
        content = instance._content
        soup = BeautifulSoup(content, 'html.parser')

        if 'sup' in content:
            footnotes = soup.find(class_="footnote").find_all('p')
            footnoteref = soup.find_all(class_="footnote-ref")

            for index, item in enumerate(footnotes):
                footnoteref[index].parent['class'] = 'popup_footnote'
                tag = soup.new_tag('span')
                tag.append(BeautifulSoup(item.decode_contents(), 'html.parser'))
                footnoteref[index].insert_after(tag)

        instance._content = soup.decode()

def register():
    signals.content_object_init.connect(content_object_init)
</pre></div>
<p>For simplicity’s sake I use the BeautifulSoup library to locate all footnote references and their respective footnotes. Then I loop through them and copy the contents of the footnote in a ‘popup_footnote’ span I append to the footnote reference container.</p>
<p>Styling is done in CSS. Below is my markup. I use the <code>left/transform</code> to center the absolute-positioned pop-up over the footnote reference.</p>
<div class="codehilite"><pre><span></span><span class="nt">sup</span><span class="nc">.popup_footnote</span> <span class="nt">span</span> <span class="p">{</span>   
    <span class="nb">text-align</span><span class="o">:</span> <span class="nb">justify</span><span class="p">;</span>
    <span class="nb">z-index</span><span class="o">:</span><span class="m">10</span><span class="p">;</span>
    <span class="nb">display</span><span class="o">:</span><span class="nb">none</span><span class="p">;</span> 
    <span class="nb">padding</span><span class="o">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nb">line-height</span><span class="o">:</span><span class="m">16px</span><span class="p">;</span>
    <span class="nb">opacity</span><span class="o">:</span><span class="m">0</span><span class="o">.</span><span class="m">9</span><span class="p">;</span>
    <span class="nb">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span><span class="m">4px</span><span class="p">;</span>
    <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">5px</span> <span class="m">5px</span> <span class="m">8px</span> <span class="m">#D4D4D4</span><span class="p">;</span>
    <span class="nb">top</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
    <span class="nb">left</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="n">transform</span><span class="o">:</span> <span class="n">translate</span><span class="p">(</span><span class="m">-50%</span><span class="o">,</span> <span class="m">0</span><span class="p">);</span>
    <span class="nb">position</span><span class="o">:</span><span class="nb">absolute</span><span class="p">;</span> 
    <span class="nb">width</span><span class="o">:</span> <span class="m">250px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">sup</span><span class="nc">.popup_footnote</span><span class="nd">:hover</span> <span class="nt">span</span><span class="p">{</span>
    <span class="nb">display</span><span class="o">:</span><span class="nb">inline</span><span class="p">;</span> 
    <span class="nb">color</span><span class="o">:</span><span class="m">#111</span><span class="p">;</span>
    <span class="nb">border</span><span class="o">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#eaeaea</span><span class="p">;</span>
    <span class="nb">background-color</span><span class="o">:</span> <span class="m">#fffcfc</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
<p>The downside to this CSS-only implementation (next to having double content in your markup) is that it fails to respond well to responsive design. Fixed-size pop-ups relative to the footnote pointer could result in a potential screen overflow. If this is an issue, the only alternative is using jquery and calculate the position of your reference relative to the window border and use this to calculate an ideal pop-up location. Of course if you’re relying on the jquery library either way you might as well use that to copy the footnote on hover instead of above’s solution. For such an example, I recommend <a href="http://ignorethecode.net/blog/2010/04/20/footnotes/">ignorethecode.net’s solution</a>.</p>
<div class="footnote">
<hr/>
<ol>
<li id="fn:1">
<p>The difficulty writing web-content with footnotes is distinguishing footnotes or direct links. I generally draw the line between source citation as footnote and useful information as direct link. <a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>Using <code>:active</code> to substitute the lack of proper hover on touch devices wouldn’t be effective as these pop-ups display over anchors. A dirty solution would be to use media tags and keep <code>display:none</code> for mobile device widths, but with the blurring of lines between touch and mouse input devices lately this is not foolproof. <a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
</ol>
</div>
    <hr/>
        </div>

    <div class="comments">
        <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'steviepoppe';
                var disqus_identifier = 'blog/2016/08/pelican-plugin-css-only-footnote-pop-up/';
                var disqus_url = 'https://steviepoppe.github.io/blog/2016/08/pelican-plugin-css-only-footnote-pop-up/';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
        <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>
                <hr />
        <div class="category">
            <h2>Related posts</h2>
            <dl class="dl-horizontal">
                <dt>di 23 augustus 2016</dt>
                <dd><a href="https://steviepoppe.github.io/blog/2016/08/hello-world-about-this-blog/">Hello World - About This Blog</a></dd>
            </dl>
            </div>
        <hr />
    </div>
            </div>
            <!-- /Content --> 

            <!-- Footer -->
            <footer id="footer" class="footer gradient-2">
            <div id="footercontent">
              &copy; Stevie Poppe 2016
              <div>
                <ul class="footer-nav">                    
                  <span style="font-weight: bold;">Sitemap:</span>
                  <li>
                  <a href="https://steviepoppe.github.io/" class="footer-nav-middle-a">Home</a></li>
                  <li>
                  <a href="https://steviepoppe.github.io/blog/archives/" class="footer-nav-middle-a">Archives</a></li>
                  <li>
                  <a href="https://steviepoppe.github.io/blog/tags/" class="">Tagcloud</a></li>
                  </ul>
                </div>
                <div style="margin-top: -95px; margin-right:15px; float: right;">
            <h5><a href="#">Back to top ↑</a></h5>
          </div>


<!--               <div class="container footer-container ">
                <div class="row">
                  <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                    <div class="footer-title">Sitemap</div>
                    <ul class="list-unstyled">
                      <li><a href="https://steviepoppe.github.io/">Home</a></li>
                      <li><a href="https://steviepoppe.github.io/blog/archives/">Archives</a></li>
                      <li><a href="https://steviepoppe.github.io/blog/tags/">Tagcloud</a></li>
                      <li><a href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"></a></li>
                      <li><a href="http://localhost:8000/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"></a></li>
                    </ul>
                  </div>


                  <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                    <div class="pull-right text-right" style="float: left;">
                      <small><em>Proudly powered by <a href="http://docs.getpelican.com/" target="_blank">pelican</a></em></small><br/>
                      <small><em>Theme and code by <a href="https://github.com/molivier" target="_blank">molivier</a></em></small><br/>
                      <small>&copy; Stevie Poppe 2016</small>
                    </div>                  
                    <div id="back_up"  style="float: right;">                
                  <a href="#" class="back_up" title="Back to the top"><i>↑</i></a>
                </div>
                  </div>                

                </div>

              </div> -->
            </footer>
            <!-- /Footer -->
          </div>
        </body>
        </html>