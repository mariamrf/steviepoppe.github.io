<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Stylesheets -->
  <link href="https://steviepoppe.net/theme/css/all.min.css" rel="stylesheet">
<style>
@import url(https://fonts.googleapis.com/earlyaccess/notosansjapanese.css);
@import 'https://fonts.googleapis.com/css?family=Poiret+One|Quicksand';
</style>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js">
</script>
  <!-- /Stylesheets -->

  <script type="text/javascript">
    var host = "steviepoppe.net";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
      window.location.protocol = "https";
  </script>

  <meta charset="utf-8">
  <meta name="robots" content="NOODP">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Due to my studies I (will) often use Japanese in my blog. As I gave some thought to typography and readability, I found the default appearance of Japanese text to be in stark contrast with the rest of my design. To target specifically Japanese text, I wrote a small Markdown-Python extension for use in static blog generators as Jekyll and Pelican (or pretty much anything that utilizes Markdown-Python to parse Markdown in HTML) and embed such text in a span with the language attribute set to Japanese. The added, and probably more important bonus, aside from styling and semantic reasons, is that this method counters the negative effects of Han unification in so-called CJK-languages.">
  <meta name="keywords" content="fonts, Japanese, markdown, pelican, python">
  <meta name="author" content="Stevie Poppe">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="icon" href="https://steviepoppe.net/favicon.ico">

  <link rel="shortcut icon" type="image/png" href="https://steviepoppe.net/images/icons/favicon.png">
  <link rel="shortcut icon" type="image/x-icon" href="https://steviepoppe.net/favicon.ico">

  <title>Parsing Japanese Text in Markdown-Python for Stylizing and Semantic Purposes | Onoreto</title>
<link rel="canonical" href="https://steviepoppe.net/blog/2016/09/parsing-japanese-text-in-markdown-python-for-stylizing-and-semantic-purposes/">


<!--               <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
              <script>
                 WebFont.load({
                  google: {
                    families: ['Poiret+One', 'Quicksand']
                  }
                });
              </script> -->



  <!-- RSS Feeds -->
  <link href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Onoreto Full Atom Feed" />
  <link href="http://localhost:8000/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto Full RSS Feed" />
  <link href="http://localhost:8000/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto RSS Feed" />
  <link href="http://localhost:8000/feeds/technical.atom.xml" type="application/atom+xml" rel="alternate" title="Onoreto Categories Atom Feed" />
  <link href="http://localhost:8000/feeds/technical.rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto Categories RSS Feed" />
  <!-- /RSS Feeds -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
          <![endif]-->



          <link rel="author" href="https://plus.google.com/112676714486792414615"/>
   

        </head>

        <body style="background-repeat: repeat; background-position: top left; background-attachment: scroll; background-image: url('https://steviepoppe.net/images/asanoha-400px.png');">
          <div id="wrapper">

            <div class="master">
              <div class="head-container">

                <div class="page-header">
                  <a href="https://steviepoppe.net" class="avatar-container pull-left">
                    <div class="avatar">
                      <div class="side"><img src="https://steviepoppe.net/images/logo2.png" class="img-responsive"/></div>
                    </div>
                  </a>
                  <h1 style="font-size: 28px; letter-spacing: 1px;"><a href="https://steviepoppe.net">Onoreto</a> <small>@Stevie Poppe</small></h1>
                </div>

                <div id="nav-wrapper">
                  <nav class="navbar navbar-default" id="nav">

                    <div class="navbar-collapse" id="steviesmenubar">
                      <div style="float: left;">
                        <ul class="nav navbar-nav">
<li class=" ">
                            <a  href="/"><img id="smallicon" src="https://steviepoppe.net/images/logosmall2.png"><i class="icon-home icon-menu"></i>Blog</a>
                            </li><li class=" dropdown">
                            <a  class="dropdown-toggle" data-target="#"  data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"  href="/blog/category/"><i class="icon-folder-close icon-menu"></i>Categories                              <span class="caret"></span>
</a>
                              <ul class="dropdown-menu" id="menu1" aria-labelledby="drop4"> 
                                <li><a href="https://steviepoppe.net/blog/category/personal/"><i class="icon-headphones icon-menu"></i>Personal</a></li>
                                <li><a href="https://steviepoppe.net/blog/category/studies/"><i class="icon-globe icon-menu"></i>Studies</a></li> 
                                <li><a href="https://steviepoppe.net/blog/category/technical/"><i class="icon-keyboard icon-menu"></i>Technical</a></li>
                              </ul> 
                            </li><li >
                            <a href="https://steviepoppe.net/about/"><i class="icon-hashtag icon-menu"></i>About</a></li><li >
                            <a href="https://steviepoppe.net/resources/"><i class="icon-file2 icon-menu"></i>Resources</a></li>                          </ul>
                        </div>
                        <div class="social">
                          <ul class="socialnav socialonly social-icons-footer collapse">

                            <li>
                              <a href="https://be.linkedin.com/in/stevie-poppe-9048b395" title="Linkedin">
                                <i class="icon-linkedin" style="font-size: 10px !important;"></i>
                              </a><span class="screen-reader">Linkedin</span>
                            </li>
                            <li>
                              <a href="https://www.flickr.com/photos/147061735@N04/" title="Flickr">
                                <i class="icon-flickr" style="font-size: 10px !important;"></i>
                              </a><span class="screen-reader">Flickr</span>
                            </li>
                            <li>
                              <a href="https://twitter.com/PoppeStevie" title="Twitter">
                                <i class="icon-twitter" style="font-size: 10px !important;"></i>
                              </a><span class="screen-reader">Twitter</span>
                            </li>
                            <li>
                              <a href="https://www.goodreads.com/user/show/35676792-stevie-poppe" title="Goodreads">
                                <i class="icon-goodreads" style="font-size: 10px !important;"></i>
                              </a><span class="screen-reader">Goodreads</span>
                            </li>
                          </ul>
                          <ul class="socialnav rssonly social-icons-footer">
                            <li>
                              <a href="https://steviepoppe.net/feeds/rss.xml" title="RSS">
                                <i class="icon-rss" style="font-size: 10px !important;">
                                </i>
                              </a>
                            </li>
                          </ul>
                          <form id="searchform" class="navbar-form navbar-right collapse" action="https://steviepoppe.net/search.html" > 
                            <input type="text" class="search-query form-control search-query" placeholder="Search" required name="q" id="tipue_search_input"></form>

                          </div>


                        </div>

                      </nav>
                    </div>
                  </div>
                </div>


                <div id="main">
    <div class="container content padding-40">
    <div class="container header-wrapper nobanner">
        <hr/>
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content center">
                      <h1 class="header-title nocount">Parsing Japanese Text in Markdown-Python for Stylizing and Semantic Purposes</h1>
                      <p class="header-date">di 06 september 2016, in category <a href="https://steviepoppe.net/blog/category/technical/">Technical</a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="icon-tags" aria-hidden="true"></span>
<a href="https://steviepoppe.net/blog/tags/fonts/">fonts</a>, <a href="https://steviepoppe.net/blog/tags/japanese/">Japanese</a>, <a href="https://steviepoppe.net/blog/tags/markdown/">markdown</a>, <a href="https://steviepoppe.net/blog/tags/pelican/">pelican</a>, <a href="https://steviepoppe.net/blog/tags/python/">python</a>                      </p>
                  </div>
              </div>
        </div>
    </div>
    <div class="container-main">
<!--          -->
            <nav class="toc">
            <p class="toc_title">Table of Contents</p>
            <div class="toc">
<ul>
<li><a href="#download">Download</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#styling">Styling</a></li>
<li><a href="#further-reading">Further reading</a></li>
</ul>
</div>
            </nav>
        

<p>Due to my studies I (will) often use Japanese in my blog. As I gave some thought to typography and readability, I found the default appearance of Japanese text to be in stark contrast with the rest of my design.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> To target specifically Japanese text, I wrote a small Markdown-Python extension for use in static blog generators as Jekyll and Pelican (or pretty much anything that utilizes Markdown-Python to parse Markdown in HTML) and embed such text in a span with the language attribute set to Japanese. The added, and probably more important bonus, aside from styling and semantic reasons, is that this method counters the negative effects of <a href="https://en.wikipedia.org/wiki/Han_unification">Han unification</a> in so-called CJK-languages.</p>

<h1 id="download"><a class="toclink" href="#download">Download</a></h1>
<p>I’ve added the extension on it’s <a href="https://github.com/steviepoppe/lang_ja_span_markdown">own repository</a> on my github for anyone interested, but as it serves it’s purpose for me as-is I have no further interest in maintaining it at the moment.<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup></p>
<h1 id="installation"><a class="toclink" href="#installation">Installation</a></h1>
<p>Copy the <code>japanese.py</code> script into your python-markdown extension directory.</p>
<p>If you’re using <a href="http://docs.getpelican.com/en/latest/">Pelican</a> as static site generator, open your project’s <code>pelicanconf.py</code> and add <code>'japanese'</code> to the <code>MD_EXTENSIONS</code> list:</p>
<div class="codehilite"><pre><span></span>    <span class="n">MD_EXTENSIONS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'japanese'</span><span class="p">]</span>
</pre></div>
<h1 id="usage"><a class="toclink" href="#usage">Usage</a></h1>
<p>Using a simple regular expression <code>(\{\{)(.+?)(\}\})</code>, the extension treats double {} brackets as span tags with a <code>lang="ja"</code> attribute. </p>
<div class="codehilite"><pre><span></span><span class="x">    </span><span class="cp">{{</span><span class="err">読書クラブ</span><span class="cp">}}</span><span class="x"></span>
</pre></div>
<p>will output</p>
<div class="codehilite"><pre><span></span>    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">lang</span><span class="o">=</span><span class="s">"ja"</span><span class="p">&gt;</span>読書クラブ<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>
<p><strong>Example 1</strong> (fonts): just compare <span style="font-size: 135%;"><span lang="ja"><ruby><rb>読書</rb><rp>(</rp><rt>どくしょ</rt><rp>)</rp></ruby>クラブ</span></span> (custom) to <span style="font-size: 130%;"><ruby><rb>読書</rb><rp>(</rp><rt>どくしょ</rt><rp>)</rp></ruby>クラブ</span> (Meiryo) to <span style='font-size: 130%; font-family: "MS Gothic";'><ruby><rb>読書</rb><rp>(</rp><rt>どくしょ</rt><rp>)</rp></ruby>クラブ</span> (MS Gothic default).<sup id="fnref:3"><a class="footnote-ref" href="#fn:3" rel="footnote">3</a></sup></p>
<p><strong>Example 2</strong> (unihan): compare the Chinese to Japanese characters: <span lang="zh" style="font-size: 130%; font-family: 'Quicksand',sans-serif;">隆</span> (<span lang="ja" style="font-size: 135%;">隆</span>), <span lang="zh" style="font-size: 130%; font-family: 'Quicksand',sans-serif;">誤</span> (<span lang="ja" style="font-size: 135%;">誤</span>), <span lang="zh" style="font-size: 130%; font-family: 'Quicksand',sans-serif;">直</span> (<span lang="ja" style="font-size: 135%;">直</span>).<sup id="fnref:4"><a class="footnote-ref" href="#fn:4" rel="footnote">4</a></sup></p>
<h1 id="styling"><a class="toclink" href="#styling">Styling</a></h1>
<p>Although it’s a bit of a risk performance-wise, I’m quite a fan of Google’s free webfonts.<sup id="fnref:5"><a class="footnote-ref" href="#fn:5" rel="footnote">5</a></sup> Due the complexity of the Japanese character-set, development on these have been slow<sup id="fnref:6"><a class="footnote-ref" href="#fn:6" rel="footnote">6</a></sup>, but <a href="https://en.wikipedia.org/wiki/Noto_fonts">Google’s Noto Font</a> is getting quite performant and with the Japanese font set supporting near 7000 characters, it should pose no problem for most webprojects. Since it works better, typography-wise, with the rest of my fonts, I use this one over fonts as Meiryo that’re more widespread across all platforms.</p>
<p>Using the CSS below, I ensure max compatibility by using Meiryo and others as fallback if the page can’t connect to Google’s font API.</p>
<div class="codehilite"><pre><span></span><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="nt">https</span><span class="o">://</span><span class="nt">fonts</span><span class="nc">.googleapis.com</span><span class="o">/</span><span class="nt">earlyaccess</span><span class="o">/</span><span class="nt">notosansjapanese</span><span class="nc">.css</span><span class="o">)</span><span class="p">;</span>

    <span class="o">[</span><span class="nt">lang</span><span class="o">=</span><span class="s2">"ja"</span><span class="o">]</span> <span class="p">{</span>
      <span class="nb">font-family</span><span class="o">:</span> <span class="s2">"Noto Sans Japanese"</span><span class="o">,</span> <span class="s2">"メイリオ"</span><span class="o">,</span><span class="s2">"Meiryo"</span><span class="o">,</span><span class="s2">"ヒラギノ角ゴ Pro W3"</span><span class="o">,</span>
      <span class="s2">"Hiragino Kaku Gothic Pro"</span><span class="o">,</span><span class="s2">"ＭＳ Ｐゴシック"</span><span class="o">,</span><span class="s2">"MS PGothic"</span><span class="o">,</span><span class="n">Sans</span><span class="o">-</span><span class="n">Serif</span><span class="p">;</span>
      <span class="nb">font-weight</span><span class="o">:</span> <span class="m">100</span><span class="p">;</span>
      <span class="nb">font-size</span><span class="o">:</span> <span class="m">95%</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
<h1 id="further-reading"><a class="toclink" href="#further-reading">Further reading</a></h1>
<ul>
<li><a href="http://www.growingwiththeweb.com/2014/03/languages-and-chinese-characters-on-the-web.html">http://www.growingwiththeweb.com/2014/03/languages-and-chinese-characters-on-the-web.html</a></li>
<li><a href="http://nimbupani.com/declaring-languages-in-html-5.html">http://nimbupani.com/declaring-languages-in-html-5.html</a></li>
<li><a href="https://design.studio-umi.jp/blog/google-web-font-japan">https://design.studio-umi.jp/blog/google-web-font-japan</a></li>
<li><a href="http://kanjialive.com/2013/04/selecting-a-better-japanese-font-for-windows-web-browsers/">http://kanjialive.com/2013/04/selecting-a-better-japanese-font-for-windows-web-browsers/</a></li>
</ul>
<div class="footnote">
<hr/>
<ol>
<li id="fn:1">
<p>This is less so on mobile devices. Most Windows web browsers default to MS Gothic, lacking anti-aliasing found in newer fonts as Meiryo, and require some manual adjustments. For maximal compatibility, I prefer to do this in-site. If no further customization is necessary, just adding Meiryo as fallback font in the page’s font-family is sufficient, eg. <code>font-family: Arial, Helvetica, Meiryo,sans-serif;</code>. <a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>A possible extension could be one where different regular expressions test for different languages and thus deliver different lang attributes. If I find the need for that on my own blog (eg. Korean), I’ll update this.  <a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:3">
<p>For furigana support I use a slightly editted version of an existing MD extension available at <a href="https://github.com/djfun/furigana_markdown">https://github.com/djfun/furigana_markdown</a>. <a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
<li id="fn:4">
<p>If a multilingual page uses only Japanese, it’s sufficient to put a Japanese font as fallback in the body’s font-family. If occasionally Chinese or Korean characters are used as well, this approach, aside from semantic benefits, remains more recommended. <a class="footnote-backref" href="#fnref:4" rev="footnote" title="Jump back to footnote 4 in the text">↩</a></p>
</li>
<li id="fn:5">
<p>I use <a href="https://fonts.google.com/specimen/Quicksand">Quicksand</a> and <a href="https://fonts.google.com/specimen/Poiret+One">Poirot One</a> for all my latin-based text on this page, for example. <a class="footnote-backref" href="#fnref:5" rev="footnote" title="Jump back to footnote 5 in the text">↩</a></p>
</li>
<li id="fn:6">
<p>Adobe’s competing, subscription-based Typekit apparently offers a wider range of Japanese webfonts for anyone interested: <a href="https://typekit.com/fonts?script=japanese">https://typekit.com/fonts?script=japanese</a>. <a class="footnote-backref" href="#fnref:6" rev="footnote" title="Jump back to footnote 6 in the text">↩</a></p>
</li>
</ol>
</div>
    <hr/>
        </div>

    <div class="comments">
        <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'steviepoppe';
                var disqus_identifier = 'blog/2016/09/parsing-japanese-text-in-markdown-python-for-stylizing-and-semantic-purposes/';
                var disqus_url = 'https://steviepoppe.net/blog/2016/09/parsing-japanese-text-in-markdown-python-for-stylizing-and-semantic-purposes/';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
        <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>
                <hr />
        <div class="category">
            <h2>Related posts</h2>
            <dl class="dl-horizontal">
                <dt>do 25 augustus 2016</dt>
                <dd><a href="https://steviepoppe.net/blog/2016/08/pelican-plugin-css-only-footnote-pop-up/">Pelican Plugin: CSS-only footnote pop-up</a></dd>
                <dt>za 17 september 2016</dt>
                <dd><a href="https://steviepoppe.net/blog/2016/09/a-quick-guide-on-using-anki-3-contextualize-your-vocab-cards-with-example-sentences/">A <del>Quick</del> Guide on Using Anki 3: contextualize your vocab cards with example sentences</a></dd>
                <dt>wo 07 september 2016</dt>
                <dd><a href="https://steviepoppe.net/blog/2016/09/a-quick-guide-on-using-anki-effectively-in-an-academic-context/">A <del>Quick</del> Guide on Using Anki (effectively) (in an academic context)</a></dd>
                <dt>zo 28 augustus 2016</dt>
                <dd><a href="https://steviepoppe.net/blog/2016/08/visiting-a-japanese-elementary-school-an-awkward-experience-to-remember/">Visiting a Japanese Elementary School - An (Awkward) Experience to Remember</a></dd>
                <dt>do 08 september 2016</dt>
                <dd><a href="https://steviepoppe.net/blog/2016/09/a-quick-guide-on-using-anki-2-an-efficient-vocab-mining-set-up-with-anki-and-rikaisama/">A <del>Quick</del> Guide on Using Anki 2: an efficient vocab mining set-up with Anki and Rikaisama</a></dd>
            </dl>
            </div>
        <hr />
    </div>
                </div>

                <footer id="footer" class="footer gradient-2">
                  <div id="footercontent">
                    &copy; Stevie Poppe 2016
                    <div>
                      <ul class="footer-nav">                    
                       <li class=" footer-nav-middle ">
                        <a href="https://steviepoppe.net/" class="footer-nav-middle-a footer-nav-first-a">Home</a></li>
                       <li class=" footer-nav-middle ">
                        <a href="https://steviepoppe.net/blog/archives/" class="footer-nav-middle-a ">Archives</a></li>
                       <li class=" footer-nav-middle ">
                        <a href="https://steviepoppe.net/blog/category/" class="footer-nav-middle-a ">Categories</a></li>
                       <li class=" footer-nav-last ">
                        <a href="https://steviepoppe.net/blog/tags/" class="footer-nav-middle-a ">Tagcloud</a></li>
                      </ul>
                    </div>
                    <div style="margin-top: -95px; margin-right:15px; float: right;">
                      <h5><a id="backtotop" href="#">Back to top ↑</a></h5>
                    </div>
                  </footer>
                </div>


    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">

              <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script> -->
              <script type="text/javascript" src="https://steviepoppe.net/theme/js/footnotes.js"></script>  
              <script type="text/javascript" src="https://steviepoppe.net/theme/js/bootstrap.js"></script>
              <script>
                $(function() {
                  $('#nav-wrapper').height($("#nav").height());
                  
                  $('#nav').affix({
                    offset: { top: $('#nav').offset().top }
                  });
                });
              </script>

              <!-- Google Analytics -->
              <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-82857115-1', 'auto');
                ga('send', 'pageview');
              </script>
              <!-- /Google Analytics -->
            </body>
            </html>