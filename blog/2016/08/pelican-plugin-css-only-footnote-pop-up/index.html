<!DOCTYPE html>

<html lang="en">

<head>
  <!-- Stylesheets -->
  <link href="https://steviepoppe.net/theme/css/all.min.css" rel="stylesheet">
  <style>
    @import url(https://fonts.googleapis.com/earlyaccess/notosansjapanese.css);
    @import 'https://fonts.googleapis.com/css?family=Poiret+One|Quicksand';
  </style>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js">
  </script>
  <!-- /Stylesheets -->

  <script type="text/javascript">
    var host = "steviepoppe.net";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
      window.location.protocol = "https";
  </script>

  <meta charset="utf-8">
  <meta name="robots" content="NOODP">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Footnotes are a classic staple in any writer’s toolbox and allows them to, in an unobtrusive way, citate sources or display additional information not directly related to the original argument. Yet I feel online footnotes, through the way they’re often implemented imitating printed media footnotes, come over quite counterintuitive by forcing the interested reader to disrupt his reading flow, and by failing to make use of today’s extensive webdesign posibilities. As I royally use footnotes in my markdown writing workflow I figured I’d get acquainted with the Pelican documentation a bit and write a small unobtrusive CSS pop-up plugin to display these on hover for those devices that support it.">
  <meta name="keywords" content="Footnotes, Markdown, Pelican, Python">
  <meta name="author" content="Stevie Poppe">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="icon" href="https://steviepoppe.net/favicon.ico">

  <link rel="shortcut icon" type="image/png" href="https://steviepoppe.net/images/icons/favicon.png">
  <link rel="shortcut icon" type="image/x-icon" href="https://steviepoppe.net/favicon.ico">

  <title>Pelican Plugin: CSS-only footnote pop-up | Onoreto</title>
<link rel="canonical" href="https://steviepoppe.net/blog/2016/08/pelican-plugin-css-only-footnote-pop-up/">


<!--               <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
              <script>
                 WebFont.load({
                  google: {
                    families: ['Poiret+One', 'Quicksand']
                  }
                });
              </script> -->



              <!-- RSS Feeds -->
              <link href="https://steviepoppe.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Onoreto Full Atom Feed" />
              <link href="https://steviepoppe.net/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto Full RSS Feed" />
              <link href="https://steviepoppe.net/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto RSS Feed" />
              <link href="https://steviepoppe.net/feeds/technical.atom.xml" type="application/atom+xml" rel="alternate" title="Onoreto Categories Atom Feed" />
              <link href="https://steviepoppe.net/feeds/technical.rss.xml" type="application/rss+xml" rel="alternate" title="Onoreto Categories RSS Feed" />
              <!-- /RSS Feeds -->

              <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
          <![endif]-->



          <link rel="author" href="https://plus.google.com/112676714486792414615"/>
   

        </head>

        <body style="background-repeat: repeat; background-position: top left; background-attachment: scroll; background-image: url('https://steviepoppe.net/images/asanoha-400px.png');">
          <div id="wrapper">

            <div class="master">
              <div class="head-container">

                <div class="page-header">
                  <a href="https://steviepoppe.net" class="avatar-container pull-left">
                    <div class="avatar">
                      <div class="side"><img src="https://steviepoppe.net/images/logo2.png" class="img-responsive"/></div>
                    </div>
                  </a>
                  <h1 style="font-size: 28px; letter-spacing: 1px;"><a href="https://steviepoppe.net">Onoreto</a> <small><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">@Stevie Poppe</span></span></small></h1>
                </div>

                <div id="nav-wrapper">
                  <nav class="navbar navbar-default" id="nav">

                    <div class="navbar-collapse" id="steviesmenubar">
                      <div style="float: left;">
                        <ul class="nav navbar-nav">
<li class=" ">
                            <a  href="/"><img id="smallicon" src="https://steviepoppe.net/images/logosmall2.png"><i class="icon-home icon-menu"></i>Blog</a>
                            </li><li class=" dropdown">
                            <a  class="dropdown-toggle" data-target="#"  data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"  href="/blog/category/"><i class="icon-folder-close icon-menu"></i>Categories                              <span class="caret"></span>
</a>
                              <ul class="dropdown-menu" id="menu1" aria-labelledby="drop4"> 
                                <li><a href="https://steviepoppe.net/blog/category/personal/"><i class="icon-headphones icon-menu"></i>Personal</a></li>
                                <li><a href="https://steviepoppe.net/blog/category/studies/"><i class="icon-globe icon-menu"></i>Studies</a></li> 
                                <li><a href="https://steviepoppe.net/blog/category/technical/"><i class="icon-keyboard icon-menu"></i>Technical</a></li>
                              </ul> 
                            </li><li >
                            <a href="https://steviepoppe.net/about/"><i class="icon-hashtag icon-menu"></i>About</a></li><li >
                            <a href="https://steviepoppe.net/resources/"><i class="icon-file2 icon-menu"></i>Resources</a></li>                          </ul>
                        </div>
                        <div class="social">
                          <ul class="socialnav socialonly social-icons-footer collapse">

                            <li>
                              <a href="https://be.linkedin.com/in/stevie-poppe-9048b395" title="Linkedin">
                                <i class="icon-linkedin" style="font-size: 10px !important;"></i>
                              </a><span class="screen-reader">Linkedin</span>
                            </li>
                            <li>
                              <a href="https://www.flickr.com/photos/147061735@N04/" title="Flickr">
                                <i class="icon-flickr" style="font-size: 10px !important;"></i>
                              </a><span class="screen-reader">Flickr</span>
                            </li>
                            <li>
                              <a href="https://twitter.com/PoppeStevie" title="Twitter">
                                <i class="icon-twitter" style="font-size: 10px !important;"></i>
                              </a><span class="screen-reader">Twitter</span>
                            </li>
                            <li>
                              <a href="https://www.goodreads.com/user/show/35676792-stevie-poppe" title="Goodreads">
                                <i class="icon-goodreads" style="font-size: 10px !important;"></i>
                              </a><span class="screen-reader">Goodreads</span>
                            </li>
                          </ul>
                          <ul class="socialnav rssonly social-icons-footer">
                            <li>
                            <!--<a href="https://steviepoppe.net/feeds/rss.xml" title="RSS">-->
                              <a href="http://feeds.feedburner.com/Onoreto" title="Feed">
                                <i class="icon-rss" style="font-size: 10px !important;">
                                </i>
                              </a>
                            </li>
                          </ul>
                          <form id="searchform" class="navbar-form navbar-right collapse" action="https://steviepoppe.net/search.html" > 
                            <input type="text" class="search-query form-control search-query" placeholder="Search" required name="q" id="tipue_search_input"></form>
                          </div>


                        </div>

                      </nav>
                    </div>
                  </div>
                </div>


                <div id="main">
    <div class="container content padding-40" itemscope itemtype="http://schema.org/Article">
    <div class="container header-wrapper nobanner">
        <hr/>
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content center">
                      <h1 class="header-title nocount"><span itemprop="name">Pelican Plugin: CSS-only footnote pop-up</span></h1>
                      <p class="header-date"><span itemprop="datePublished" content="2016-09-07">Thu 25 August 2016</span>, in category <a href="https://steviepoppe.net/blog/category/technical/"><span itemprop="articleSection">Technical</span></a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="icon-tags" aria-hidden="true"></span>
<a href="https://steviepoppe.net/blog/tags/footnotes/">Footnotes</a>, <a href="https://steviepoppe.net/blog/tags/markdown/">Markdown</a>, <a href="https://steviepoppe.net/blog/tags/pelican/">Pelican</a>, <a href="https://steviepoppe.net/blog/tags/python/">Python</a>                      </p>
                  </div>
              </div>
        </div>
    </div>
    <div class="container-main" itemprop="articleBody">
<!--          -->
        
<p>Footnotes are a classic staple in any writer’s toolbox and allows them to, in an unobtrusive way, citate sources or display additional information not directly related to the original argument. Yet I feel online footnotes, through the way they’re often implemented imitating printed media footnotes, come over quite counterintuitive by forcing the interested reader to disrupt his reading flow, and by failing to make use of today’s extensive webdesign posibilities.</p>
<p>As I royally use footnotes in my markdown writing workflow<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> I figured I’d get acquainted with the Pelican documentation a bit and write a small unobtrusive CSS pop-up plugin to display these on hover for those devices that support it.<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup></p>

<p>My solution is pretty rough and based on the way Python-Markdown parses markdown into HTML. As it’s a quick ‘n dirty workaround untested with other parsers, I have no intention to further maintain this code so feel free to use it however you’d like.</p>
<div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">content_object_init</span><span class="p">(</span><span class="n">instance</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">_content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">_content</span>
            <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">'html.parser'</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">'sup'</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                <span class="n">footnotes</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">"footnote"</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'p'</span><span class="p">)</span>
                <span class="n">footnoteref</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">"footnote-ref"</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">footnotes</span><span class="p">):</span>
                    <span class="n">footnoteref</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="p">[</span><span class="s1">'class'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'popup_footnote'</span>
                    <span class="n">tag</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s1">'span'</span><span class="p">)</span>
                    <span class="n">tag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">decode_contents</span><span class="p">(),</span> <span class="s1">'html.parser'</span><span class="p">))</span>
                    <span class="n">footnoteref</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">insert_after</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>

            <span class="n">instance</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">content_object_init</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">content_object_init</span><span class="p">)</span>
</pre></div>
<p>For simplicity’s sake I use the BeautifulSoup library to locate all footnote references and their respective footnotes. Then I loop through them and copy the contents of the footnote in a ‘popup_footnote’ span I append to the footnote reference container.</p>
<p>Styling is done in CSS. Below is my markup. I use <code>left: 50%;</code> <code>transform: translate(-50%, 0);</code> to center the absolute-positioned pop-up over the footnote reference.</p>
<div class="codehilite"><pre><span></span>    <span class="nt">sup</span><span class="nc">.popup_footnote</span> <span class="nt">span</span> <span class="p">{</span>   
        <span class="nb">text-align</span><span class="o">:</span> <span class="nb">justify</span><span class="p">;</span>
        <span class="nb">z-index</span><span class="o">:</span> <span class="m">10</span><span class="p">;</span>
        <span class="nb">display</span><span class="o">:</span> <span class="nb">none</span><span class="p">;</span> 
        <span class="nb">padding</span><span class="o">:</span> <span class="m">5px</span><span class="p">;</span>
        <span class="nb">line-height</span><span class="o">:</span> <span class="m">16px</span><span class="p">;</span>
        <span class="nb">opacity</span><span class="o">:</span> <span class="m">0</span><span class="o">.</span><span class="m">9</span><span class="p">;</span>
        <span class="nb">border</span><span class="o">-</span><span class="n">radius</span><span class="o">:</span> <span class="m">4px</span><span class="p">;</span>
        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="o">:</span> <span class="m">5px</span> <span class="m">5px</span> <span class="m">8px</span> <span class="m">#D4D4D4</span><span class="p">;</span>
        <span class="nb">top</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
        <span class="nb">left</span><span class="o">:</span> <span class="m">50%</span><span class="p">;</span>
        <span class="n">transform</span><span class="o">:</span> <span class="n">translate</span><span class="p">(</span><span class="m">-50%</span><span class="o">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="nb">position</span><span class="o">:</span> <span class="nb">absolute</span><span class="p">;</span> 
        <span class="nb">width</span><span class="o">:</span> <span class="m">250px</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nt">sup</span><span class="nc">.popup_footnote</span><span class="nd">:hover</span> <span class="nt">span</span><span class="p">{</span>
        <span class="nb">display</span><span class="o">:</span> <span class="nb">inline</span><span class="p">;</span> 
        <span class="nb">color</span><span class="o">:</span> <span class="m">#111</span><span class="p">;</span>
        <span class="nb">border</span><span class="o">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#eaeaea</span><span class="p">;</span>
        <span class="nb">background-color</span><span class="o">:</span> <span class="m">#fffcfc</span><span class="p">;</span>
      <span class="p">}</span>
</pre></div>
<p>The downside to this CSS-only implementation (next to having double content in your markup) is that it fails to respond well to responsive design. Fixed-size pop-ups relative to the footnote pointer could result in a potential screen overflow. If this is an issue, the only alternative is using jquery and calculate the position of your reference relative to the window border and use this to calculate an ideal pop-up location. Of course if you’re relying on the jquery library either way you might as well use that to copy the footnote on hover instead of above’s solution. For such an example, I recommend <a href="http://ignorethecode.net/blog/2010/04/20/footnotes/">ignorethecode.net’s solution</a>.</p>
<div class="footnote">
<hr/>
<ol>
<li id="fn:1">
<p>The difficulty writing web-content with footnotes is distinguishing footnotes or direct links. I generally draw the line between source citation as footnote and useful information as direct link. <a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>Using <code>:active</code> to substitute the lack of proper hover on touch devices wouldn’t be effective as these pop-ups display over anchors. A dirty solution would be to use media tags and keep <code>display:none</code> for mobile device widths, but with the blurring of lines between touch and mouse input devices lately this is not foolproof. <a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
</ol>
</div>
    <hr/>
        </div>

    <div class="comments">
        <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'steviepoppe';
                var disqus_identifier = 'blog/2016/08/pelican-plugin-css-only-footnote-pop-up/';
                var disqus_url = 'https://steviepoppe.net/blog/2016/08/pelican-plugin-css-only-footnote-pop-up/';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
        <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>
                <hr />
        <div class="category">
            <h2>Related posts</h2>
            <dl class="dl-horizontal">
                <dt>Tue 06 September 2016</dt>
                <dd><a href="https://steviepoppe.net/blog/2016/09/parsing-japanese-text-in-markdown-python-for-stylizing-and-semantic-purposes/">Parsing Japanese Text in Markdown-Python for Stylizing and Semantic Purposes</a></dd>
                <dt>Tue 23 August 2016</dt>
                <dd><a href="https://steviepoppe.net/blog/2016/08/hello-world-about-this-blog/">Hello World - About This Blog</a></dd>
            </dl>
            </div>
        <hr />
    </div>
                </div>

                <footer id="footer" class="footer gradient-2">
                  <div id="footercontent">
                    <span itemprop="copyrightHolder">&copy; Stevie Poppe 2016</span>
                    <div>
                      <ul class="footer-nav">                    
                       <li class=" footer-nav-middle ">
                        <a href="https://steviepoppe.net/" class="footer-nav-middle-a footer-nav-first-a">Home</a></li>
                       <li class=" footer-nav-middle ">
                        <a href="https://steviepoppe.net/blog/archives/" class="footer-nav-middle-a ">Archives</a></li>
                       <li class=" footer-nav-middle ">
                        <a href="https://steviepoppe.net/blog/category/" class="footer-nav-middle-a ">Categories</a></li>
                       <li class=" footer-nav-last ">
                        <a href="https://steviepoppe.net/blog/tags/" class="footer-nav-middle-a ">Tagcloud</a></li>
                      </ul>
                    </div>
                    <div style="margin-top: -95px; margin-right:15px; float: right;">
                      <h5><a id="backtotop" href="#">Back to top ↑</a></h5>
                    </div>
                  </footer>
                </div>


                <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">

                <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script> -->
                <script type="text/javascript" src="https://steviepoppe.net/theme/js/footnotes.js"></script>  
                <script type="text/javascript" src="https://steviepoppe.net/theme/js/bootstrap.js"></script>
                <script>
                  $(function() {
                    $('#nav-wrapper').height($("#nav").height());

                    $('#nav').affix({
                      offset: { top: $('#nav').offset().top }
                    });
                  });
                </script>

                <!-- Google Analytics -->
                <script>
                  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                  ga('create', 'UA-82857115-1', 'auto');
                  ga('send', 'pageview');
                </script>
                <!-- /Google Analytics -->
              </body>
              </html>